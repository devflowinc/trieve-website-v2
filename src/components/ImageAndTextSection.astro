---
import { Image } from "astro:assets";
import SectionHeader from "./shared/SectionHeader.astro";
import type { ImageMetadata } from "astro";

interface Props {
  header: {
    title: string;
    tagline: string;
    leadText: string;
  };
  items: ReadonlyArray<{
    image?: string;
    tagline?: string;
    title: string;
    description?: string;
    items: ReadonlyArray<{
      title: string;
      description: string;
    }>;
  }>;
}

const { header, items = [] } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpg,jpeg,png,gif}",
  {
    eager: true,
  }
);
---

<section class="my-32">
  <div class="container mx-auto">
    <SectionHeader {...header} />

    <div class="mt-8">
      {
        items?.map((item) => (
          <div class="grid grid-cols-2 gap-16 items-center m-16 bg-amber-50/50 rounded-lg py-16 px-0 overflow-hidden">
            <div>
              {item.image && images[item.image].default ? (
                <Image
                  src={images[item.image].default}
                  alt={item.title}
                  width={images[item.image].default.width}
                  height={images[item.image].default.height}
                  class="w-full rounded-2xl -ml-4 shadow-md"
                />
              ) : null}
            </div>
            <div class="flex flex-col py-8 pr-16">
              <strong class="block my-4">{item.tagline}</strong>
              <h3 class="text-3xl font-serif tracking-tighter text-balance">
                {item.title}
              </h3>
              {item.description ? (
                <p class="text-lg font-light mb-4 text-balance">
                  {item.description}
                </p>
              ) : null}
              {item.items.map((subItem) => (
                <div class="flex flex-col my-2">
                  <strong class="text-lg block font-normal">
                    {subItem.title}
                  </strong>
                  <p class="text-base font-light">{subItem.description}</p>
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
