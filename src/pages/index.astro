---
import invariant from "tiny-invariant";

import HeroHeader from "@components/HeroHeader.astro";
import PageContent from "@components/PageContent.astro";
import Layout from "@layouts/Layout.astro";
import { keystatic } from "@lib/keystatic/client";
import CallToAction from "@components/CallToAction.astro";

const homepageContent = await keystatic.singletons.homepage.read();
invariant(homepageContent, "No homepage content found");

const { metaData, heroHeader, contentBlocks } = homepageContent;
---

<Layout pageTitle={metaData.title} pageDescription={metaData.description}>
  <HeroHeader {...heroHeader} />
  <PageContent content={contentBlocks.content} />

  {/* Append a call to action section for the homepage */}
  <CallToAction />
</Layout>
